(this["webpackJsonpgithub-release-download-analysis"]=this["webpackJsonpgithub-release-download-analysis"]||[]).push([[0],{120:function(e,t,a){e.exports={card:"card_card__1wB1W"}},121:function(e,t,a){e.exports={github:"github_github__Qu7J7"}},13:function(e,t,a){e.exports={floatButton:"app_floatButton__TKrTn",introContainer:"app_introContainer__1hS7D",bannerContainer:"app_bannerContainer__-7zE_",contentContainer:"app_contentContainer__1t9-7",input:"app_input__2EpoL",sep:"app_sep__1pyA1",url:"app_url__2nw5t",analysis:"app_analysis__3O-9N",title:"app_title__1tfK9",versions:"app_versions__2gccw",horizontalWrapper:"app_horizontalWrapper__22__t",cardWrapper:"app_cardWrapper__1QXds",info:"app_info__3At5F",author:"app_author__2jehy",cardOverlayLeft:"app_cardOverlayLeft__Ot8ko",cardOverlayRight:"app_cardOverlayRight__1ljOg",footer:"app_footer__2vzCe"}},143:function(e,t,a){},227:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(8),i=a.n(s),c=a(26),l=a.n(c),o=a(48),d=a(61),u=a(62),h=a(68),p=a(67),j=(a(143),a(13)),b=a.n(j),f=a(92),m=a(128),O=a(119),v=a.n(O),x=a(262),_=a(260),g=a(261),y=a(51),w=a(42),N=a(71),C=a(3),D=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).componentDidUpdate=function(e){if(e.animValues!==n.props.animValues){var t=n.state.animValues;n.setState({animValues:t+n.props.animValues},n.calculate)}else n.calculate()},n.state={animValues:0},n.onScrollStart=n.onScrollStart.bind(Object(w.a)(n)),n.resetMin=n.resetMin.bind(Object(w.a)(n)),n.resetMax=n.resetMax.bind(Object(w.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){if(this.props.pageLock){var e=document.firstElementChild.className;document.firstElementChild.className=e+(e?" ":"")+"locked__"}i.a.findDOMNode(this.hScrollParent).addEventListener("wheel",this.onScrollStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.props.pageLock&&(document.firstElementChild.className=document.firstElementChild.className.replace(/ ?locked__/,"")),i.a.findDOMNode(this.hScrollParent).removeEventListener("wheel",this.onScrollStart)}},{key:"onScrollStart",value:function(e){var t=this;e.preventDefault();var a=e.deltaY?e.deltaY:e.deltaX,n=Math.floor(a),r=this.state.animValues,s=r+n,i=r-n;if(this.caniscroll()){window.requestAnimationFrame((function(){t.props.reverseScroll?t.setState({animValues:i}):t.setState({animValues:s})}))}}},{key:"shouldComponentUpdate",value:function(e,t,a){return(void 0===this.calculate.timer||this.props.children!==e.children||this.state.animValues!==t.animValues||this.props.animValues!==e.animValues)&&(this.props.children!==e.children||!1!==this.caniscroll())}},{key:"caniscroll",value:function(){var e=i.a.findDOMNode(this.hScrollParent),t=e.getBoundingClientRect(),a=e.firstElementChild;return a.offsetLeft<t.left||a.offsetLeft+a.offsetWidth>t.width}},{key:"calculate",value:function(){var e=this;clearTimeout(this.calculate.timer),this.calculate.timer=setTimeout((function(){var t=i.a.findDOMNode(e.hScrollParent),a=t.getBoundingClientRect(),n=t.lastElementChild.scrollWidth,r=t.offsetWidth,s=e.state.animValues,c=-(n-r);if(s>=1)e.resetMin();else if(s<=c)if(n>a.width){var l=c+1;e.resetMax(l)}else e.resetMax(0)}))}},{key:"resetMin",value:function(){this.setState({animValues:0})}},{key:"resetMax",value:function(e){this.setState({animValues:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.config,n=t.style,r=t.children,s=n.width,i=n.height,c=a||N.presets.noWobble,l=Object(y.a)({height:i||"100%",width:s||"100%",overflow:"hidden",position:"relative"},n);return Object(C.jsx)("div",{ref:function(t){e.hScrollParent=t},style:l,className:"scroll-horizontal ".concat(this.props.className||""),children:Object(C.jsx)(N.Motion,{style:{z:Object(N.spring)(this.state.animValues,c)},children:function(e){var t=e.z,a={transform:"translate3d(".concat(t,"px, 0,0)"),display:"inline-flex",height:"100%",position:"absolute",willChange:"transform"};return Object(C.jsx)("div",{style:a,children:r})}})})}}]),a}(n.Component);D.defaultProps={reverseScroll:!1,pageLock:!1,config:null,style:{width:"100%",height:"100%"},className:null,animValues:null};var S=a(129),k=a(120),M=a.n(k),V=function(e){var t=e.className,a=e.children,n=Object(S.a)(e,["className","children"]);return Object(C.jsx)("div",Object(y.a)(Object(y.a)({className:"".concat(M.a.card," ").concat(t||"")},n),{},{children:a}))},L=a(52),E=a.n(L),A=function(e){var t=e.title,a=e.data,n=e.tail;return Object(C.jsxs)("div",{children:[Object(C.jsx)("span",{className:E.a.title,children:t}),Object(C.jsxs)("div",{className:E.a.content,children:[Object(C.jsx)("h2",{className:E.a.data,children:a}),Object(C.jsx)("span",{className:E.a.tail,children:n})]})]})},W=a(65),P=function(e,t){return{color:["#193568"],tooltip:{trigger:"axis",formatter:"{a} <br/>Version {b}: {c} times",axisPointer:{type:"shadow"}},grid:{top:0,left:-40,right:0,bottom:0,containLabel:!0},xAxis:[{type:"category",data:t,axisLine:{lineStyle:{color:"#999999"}},axisTick:{alignWithLabel:!0},axisLabel:{}}],yAxis:[{show:!1,type:"value",axisLine:{show:!1,lineStyle:{color:"#999999"}}}],series:[{name:"Download Count",type:"bar",barWidth:"80%",data:e}]}},R=function(e){var t=e.data,a=e.tag;return Object(C.jsx)(W.a,{option:P(t,a),notMerge:!0,lazyUpdate:!0})},T=function(e){return{color:["#193568","#176297","#93b7e3"],tooltip:{trigger:"item",formatter:"{a} <br/>Version {b}: {c} times ({d}%)"},series:[{name:"Download Ratio",type:"pie",radius:[20,110],center:["50%","50%"],roseType:"radius",grid:{top:0,left:0,right:0,bottom:0,containLabel:!0},data:e.sort((function(e,t){return e.value-t.value})),animationType:"scale",animationEasing:"elasticOut",animationDelay:function(e){return 200*Math.random()}}]}},z=function(e){var t=e.data;return Object(C.jsx)(W.a,{option:T(t),notMerge:!0,lazyUpdate:!0})},I=a(121),U=a.n(I),B=a(256),G=function(e){return Object(C.jsx)("a",{className:U.a.github,href:"https://github.com/Caldis/github-releases-downloads-analysis",children:Object(C.jsx)(B.a,{"aria-label":"Github",children:Object(C.jsx)("svg",{focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",children:Object(C.jsx)("path",{d:"M12.007 0C6.12 0 1.1 4.27.157 10.08c-.944 5.813 2.468 11.45 8.054 13.312.19.064.397.033.555-.084.16-.117.25-.304.244-.5v-2.042c-3.33.735-4.037-1.56-4.037-1.56-.22-.726-.694-1.35-1.334-1.756-1.096-.75.074-.735.074-.735.773.103 1.454.557 1.846 1.23.694 1.21 2.23 1.638 3.45.96.056-.61.327-1.178.766-1.605-2.67-.3-5.462-1.335-5.462-6.002-.02-1.193.42-2.35 1.23-3.226-.327-1.015-.27-2.116.166-3.09 0 0 1.006-.33 3.3 1.23 1.966-.538 4.04-.538 6.003 0 2.295-1.5 3.3-1.23 3.3-1.23.445 1.006.49 2.144.12 3.18.81.877 1.25 2.033 1.23 3.226 0 4.607-2.805 5.627-5.476 5.927.578.583.88 1.386.825 2.206v3.29c-.005.2.092.393.26.507.164.115.377.14.565.063 5.568-1.88 8.956-7.514 8.007-13.313C22.892 4.267 17.884.007 12.008 0z"})})})})},F=a(127),J=a.n(F),Q=function(){var e=Object(o.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.github.com/repos/".concat(t,"/").concat(a,"/releases"),e.abrupt("return",J.a.get(n));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),K=Object(m.a)(),X=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(d.a)(this,a),(n=t.call(this,e)).handleGetUserInput=Object(o.a)(l.a.mark((function e(){var t,a,r,s,i,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state,a=t.url,r=t.user,s=t.repo,!a){e.next=10;break}return o=a.split("/"),i=o[o.length-2],c=o[o.length-1],e.next=7,n.handleGetReleaseData(i,c);case 7:K.push(a?"/?url=".concat(a):"/?user=".concat(r,"&repo=").concat(s)),e.next=19;break;case 10:if(!r||!s){e.next=18;break}return i=r,c=s,e.next=15,n.handleGetReleaseData(i,c);case 15:K.push(a?"/?url=".concat(a):"/?user=".concat(r,"&repo=").concat(s)),e.next=19;break;case 18:n.setState({err:"No user data input"});case 19:case"end":return e.stop()}}),e)}))),n.handleGetReleaseData=function(){var e=Object(o.a)(l.a.mark((function e(t,a){var r,s,i,c,o,d,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t,a);case 2:(r=e.sent).data.length>0?(s=r.data.sort((function(e,t){return e.created_at===t.created_at?0:e.created_at<t.created_at?1:-1})),i=new Date(s[s.length-1].created_at).Format("yyyy-MM-dd hh:mm:ss"),c=s.reduce((function(e,t){return e+n.downloadOfAssets(t.assets)}),0),o=s.map((function(e){return e.tag_name})),d=s.map((function(e){return n.downloadOfAssets(e.assets)})),u=s.map((function(e){return{value:n.downloadOfAssets(e.assets),name:e.tag_name}})),n.setState({showInput:!0,showAnalysis:!0,user:t,repo:a,data:s,since:i,totalDownload:c,trendTag:o,trendData:d,distData:u})):n.setState({err:"No release"});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.downloadOfAssets=function(e){return e.reduce((function(e,t){return e+t.download_count}),0)},n.buildVersionCards=function(){return n.state.data.sort((function(e,t){return e.tag_name===t.tag_name?0:e.tag_name<t.tag_name?1:-1})).map((function(e,t){return Object(C.jsxs)(V,{children:[Object(C.jsxs)("div",{className:b.a.title,children:[Object(C.jsx)("h2",{children:e.tag_name}),Object(C.jsx)("a",{href:e.html_url,children:"Detail >"})]}),Object(C.jsxs)("div",{className:b.a.info,children:[Object(C.jsxs)("p",{children:["Create at: ",new Date(e.created_at).Format("yyyy-MM-dd hh:mm:ss")]}),Object(C.jsxs)("p",{children:["Publish at: ",new Date(e.published_at).Format("yyyy-MM-dd hh:mm:ss")]})]}),Object(C.jsxs)("div",{className:b.a.author,children:[Object(C.jsx)(x.a,{alt:e.author.login,src:e.author.avatar_url}),Object(C.jsx)("a",{href:e.author.html_url,children:e.author.login})]})]},t)}))};var r=v.a.parse(K.location.search);return n.state={showInput:!1,showAnalysis:!1,err:"",url:r.url||"",user:r.user||"",repo:r.repo||"",data:[],since:"",totalDownload:0,trendTag:[],trendData:[],distData:[]},window.addEventListener("dragover",(function(e){e.preventDefault()}),!1),window.addEventListener("drop",(function(e){e.preventDefault()}),!1),n.handleGetUserInput(),n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.showInput,n=t.showAnalysis,r=t.url,s=t.user,i=t.repo,c=t.data,l=t.since,o=t.totalDownload,d=t.trendTag,u=t.trendData,h=t.distData;return Object(C.jsxs)("div",{className:b.a.app,children:[Object(C.jsx)("div",{className:b.a.floatButton,children:Object(C.jsx)(G,{})}),Object(C.jsx)(f.a,{className:b.a.bannerContainer,type:"bottom",duration:[350,0],children:a?Object(C.jsxs)("div",{className:b.a.input,children:[Object(C.jsx)("p",{children:"Input the target"}),Object(C.jsxs)("div",{className:b.a.sep,children:[Object(C.jsx)(g.a,{label:"USER",style:{width:"50%"},value:s,onChange:function(t){return e.setState({user:t.target.value})}}),Object(C.jsx)(g.a,{label:"REPO",style:{width:"50%"},value:i,onChange:function(t){return e.setState({repo:t.target.value})}})]}),Object(C.jsx)("p",{children:"Or url of repo"}),Object(C.jsx)("div",{className:b.a.url,children:Object(C.jsx)(g.a,{label:"URL",style:{width:"100%"},value:r,onChange:function(t){return e.setState({url:t.target.value})}})}),Object(C.jsx)("p",{children:"Then"}),Object(C.jsx)(_.a,{variant:"contained",color:"primary",onClick:this.handleGetUserInput,children:"Analysis"})]},2):Object(C.jsxs)("div",{className:b.a.introContainer,children:[Object(C.jsx)("h1",{children:"Analysis your repo's releases state on Github"}),Object(C.jsx)("div",{children:Object(C.jsx)(_.a,{variant:"contained",color:"primary",onClick:function(){return e.setState({showInput:!0})},children:"Start"})})]},1)}),Object(C.jsx)(f.a,{className:b.a.contentContainer,type:"bottom",children:n&&Object(C.jsxs)("div",{children:[Object(C.jsxs)(V,{className:b.a.analysis,children:[Object(C.jsx)("section",{children:Object(C.jsxs)("h1",{className:b.a.title,children:["Project ",i]})}),Object(C.jsxs)("section",{children:[Object(C.jsx)("h1",{children:"Total Download"}),Object(C.jsx)(A,{title:"Since ".concat(l),data:o,tail:"times"})]}),Object(C.jsxs)("section",{children:[Object(C.jsx)("h1",{children:"Download Trend"}),Object(C.jsx)(R,{tag:d,data:u})]}),Object(C.jsxs)("section",{children:[Object(C.jsx)("h1",{children:"Download Distribution of Versions"}),Object(C.jsx)(z,{data:h})]})]}),Object(C.jsxs)("div",{className:b.a.versions,children:[Object(C.jsx)("p",{children:"Versions Info"}),Object(C.jsx)("div",{className:b.a.horizontalWrapper,children:c.length>0&&Object(C.jsx)(D,{style:{height:230},children:Object(C.jsx)("div",{className:b.a.cardWrapper,children:this.buildVersionCards()})})}),Object(C.jsx)("div",{className:b.a.cardOverlayLeft}),Object(C.jsx)("div",{className:b.a.cardOverlayRight})]}),Object(C.jsxs)("div",{className:b.a.footer,children:[Object(C.jsx)("p",{children:"Designed & Made by Caldis, Power by React"}),Object(C.jsx)(G,{})]})]},1)})]})}}]),a}(r.a.Component);i.a.render(Object(C.jsx)(X,{}),document.getElementById("root"))},52:function(e,t,a){e.exports={title:"tags_title__1k3Qx",content:"tags_content__32PAx",data:"tags_data__2LCtD",tail:"tags_tail__242Px"}}},[[227,1,2]]]);
//# sourceMappingURL=main.565b51dc.chunk.js.map